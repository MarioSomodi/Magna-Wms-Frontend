{
  "openapi": "3.0.4",
  "info": {
    "title": "Magna WMS API",
    "description": "Warehouse Management System backend API for research and demonstration.",
    "contact": {
      "name": "Mario Somodi",
      "url": "https://github.com/MarioSomodi/Magna-Wms-Backend",
      "email": "mario.somodi@magna.wms"
    },
    "license": {
      "name": "MIT License",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "v1"
  },
  "paths": {
    "/api/v1/Authentication/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Authenticate user",
        "description": "Validates user credentials and issues JWT + refresh tokens inside HttpOnly cookies.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Authentication/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Logout user",
        "responses": {
          "200": {
            "description": "Logged out successfully."
          }
        }
      }
    },
    "/api/v1/Authentication/me": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get current authenticated user",
        "description": "Returns UserDto containing user ID, email, roles, and allowed warehouse IDs.",
        "responses": {
          "200": {
            "description": "User information retrieved.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          },
          "401": {
            "description": "User is not authenticated.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Authentication/refresh": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Refresh access token",
        "description": "Uses refresh cookie to generate a new access token and rotate refresh token.",
        "responses": {
          "200": {
            "description": "Tokens refreshed successfully."
          },
          "401": {
            "description": "Refresh token invalid or missing.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Authentication/register": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Register new user",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterCommand"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterCommand"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User registered successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              }
            }
          },
          "409": {
            "description": "Email already exists.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Forecasting/warehouse/{warehouseId}/item/{itemId}/forecast": {
      "get": {
        "tags": [
          "Forecasting"
        ],
        "summary": "Get latest forecast for item",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "horizonDays",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Forecast returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastSeriesDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastSeriesDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastSeriesDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Forecasting/warehouse/{warehouseId}/item/{itemId}/train": {
      "post": {
        "tags": [
          "Forecasting"
        ],
        "summary": "Train forecast for item",
        "description": "Trains an SSA-based demand forecast for the given warehouse and item.",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "horizonDays",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Forecast series created.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastSeriesDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastSeriesDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ForecastSeriesDto"
                }
              }
            }
          },
          "403": {
            "description": "User not allowed to access this warehouse."
          },
          "404": {
            "description": "No shipment history for this item."
          }
        }
      }
    },
    "/api/v1/Forecasting/warehouse/{warehouseId}/train-all": {
      "post": {
        "tags": [
          "Forecasting"
        ],
        "summary": "Train forecasts for all warehouse items",
        "description": "Aggregates shipment history for every item in a warehouse and trains SSA forecasts.",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "horizonDays",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Training completed.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/TrainForecastResultDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TrainForecastResultDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/TrainForecastResultDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Liveness check",
        "description": "Returns basic operational status of the Magna WMS API.",
        "responses": {
          "200": {
            "description": "The API is healthy.",
            "content": {
              "text/plain": {
                "schema": { }
              },
              "application/json": {
                "schema": { }
              },
              "text/json": {
                "schema": { }
              }
            }
          }
        }
      }
    },
    "/api/v1/Health/ping": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Ping test",
        "description": "Simple connectivity test endpoint. Returns 'pong' if reachable.",
        "responses": {
          "200": {
            "description": "API connectivity confirmed.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              },
              "application/json": {
                "schema": {
                  "type": "string"
                }
              },
              "text/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Health/ready": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Readiness check",
        "description": "Verifies DB connectivity and overall API readiness.",
        "responses": {
          "200": {
            "description": "Application and database are ready.",
            "content": {
              "text/plain": {
                "schema": { }
              },
              "application/json": {
                "schema": { }
              },
              "text/json": {
                "schema": { }
              }
            }
          },
          "503": {
            "description": "Database unavailable."
          }
        }
      }
    },
    "/api/v1/Inventory": {
      "get": {
        "tags": [
          "Inventory"
        ],
        "summary": "Get inventory",
        "description": "Returns inventory across allowed warehouses. Optionally filter by warehouse ID.",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Inventory retrieved.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InventoryDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InventoryDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InventoryDto"
                  }
                }
              }
            }
          },
          "403": {
            "description": "User is not allowed to access requested warehouse."
          }
        }
      }
    },
    "/api/v1/Inventory/{warehouseId}/items/{itemId}/ledger": {
      "get": {
        "tags": [
          "Inventory"
        ],
        "summary": "Get inventory ledger for item",
        "description": "Returns inventory ledger entries for a specific item in a warehouse. Optionally filter by location.",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "locationId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ledger entries returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InventoryLedgerEntryDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InventoryLedgerEntryDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InventoryLedgerEntryDto"
                  }
                }
              }
            }
          },
          "403": {
            "description": "User is not allowed to access requested warehouse."
          }
        }
      }
    },
    "/api/v1/Item": {
      "get": {
        "tags": [
          "Item"
        ],
        "summary": "Get all items",
        "description": "Returns all items currently registered in the system.",
        "responses": {
          "200": {
            "description": "List of items returned successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ItemDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ItemDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ItemDto"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No items found."
          }
        }
      }
    },
    "/api/v1/Location/{warehouseId}": {
      "get": {
        "tags": [
          "Location"
        ],
        "summary": "Get locations by Warehouse ID",
        "description": "Returns all locations assigned to the specified warehouse.",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of locations returned successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LocationDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LocationDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LocationDto"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No locations found for the given warehouse."
          }
        }
      }
    },
    "/api/v1/Permission": {
      "get": {
        "tags": [
          "Permission"
        ],
        "summary": "Get all permissions",
        "responses": {
          "200": {
            "description": "Permissions retrieved successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PermissionDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PermissionDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PermissionDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/PickTask/{taskId}": {
      "get": {
        "tags": [
          "PickTask"
        ],
        "summary": "Get pick task",
        "parameters": [
          {
            "name": "taskId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/PickTask/{taskId}/lines/{lineId}/pick": {
      "post": {
        "tags": [
          "PickTask"
        ],
        "summary": "Pick item for a task line",
        "parameters": [
          {
            "name": "taskId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "lineId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PickItemRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/PickItemRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/PickItemRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/PickTask/{taskId}/start": {
      "post": {
        "tags": [
          "PickTask"
        ],
        "summary": "Start pick task",
        "parameters": [
          {
            "name": "taskId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/PickTask/create": {
      "post": {
        "tags": [
          "PickTask"
        ],
        "summary": "Create pick task",
        "parameters": [
          {
            "name": "salesOrderId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PickTaskDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/PickTask/warehouse/{warehouseId}": {
      "get": {
        "tags": [
          "PickTask"
        ],
        "summary": "Get pick tasks by warehouse",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PickTaskDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PickTaskDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PickTaskDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Putaway/task": {
      "post": {
        "tags": [
          "Putaway"
        ],
        "summary": "Create a new putaway task.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePutawayTaskRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePutawayTaskRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePutawayTaskRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Putaway task created.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PutawayTaskDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PutawayTaskDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PutawayTaskDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Putaway/task/{taskId}/execute": {
      "post": {
        "tags": [
          "Putaway"
        ],
        "summary": "Execute an existing putaway task (move stock to final location).",
        "parameters": [
          {
            "name": "taskId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExecutePutawayRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ExecutePutawayRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ExecutePutawayRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Putaway executed.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PutawayTaskDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PutawayTaskDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PutawayTaskDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Receipt": {
      "post": {
        "tags": [
          "Receipt"
        ],
        "summary": "Create a new receipt",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReceiptRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReceiptRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReceiptRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Receipt created.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Receipt/{id}": {
      "get": {
        "tags": [
          "Receipt"
        ],
        "summary": "Get receipt by ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Receipt returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Receipt/{id}/lines": {
      "get": {
        "tags": [
          "Receipt"
        ],
        "summary": "Get receipt lines for a receipt",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Receipt lines returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReceiptLineDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReceiptLineDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReceiptLineDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Receipt/{id}/lines/{lineId}/receive": {
      "post": {
        "tags": [
          "Receipt"
        ],
        "summary": "Receive quantity for a receipt line",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "lineId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReceiveReceiptLineRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ReceiveReceiptLineRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ReceiveReceiptLineRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Receipt updated.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Receipt/warehouse/{warehouseId}": {
      "get": {
        "tags": [
          "Receipt"
        ],
        "summary": "Get all receipts for a warehouse",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Receipts returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReceiptDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReceiptDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReceiptDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Replenishment/warehouse/{warehouseId}": {
      "get": {
        "tags": [
          "Replenishment"
        ],
        "summary": "Get replenishment suggestions for all warehouse items",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "horizonDays",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Suggestions returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReplenishmentSuggestionDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReplenishmentSuggestionDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReplenishmentSuggestionDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Replenishment/warehouse/{warehouseId}/item/{itemId}": {
      "get": {
        "tags": [
          "Replenishment"
        ],
        "summary": "Get replenishment suggestion for a single item",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "horizonDays",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 30
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Suggestion returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ReplenishmentSuggestionDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReplenishmentSuggestionDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReplenishmentSuggestionDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Role": {
      "get": {
        "tags": [
          "Role"
        ],
        "summary": "Get all roles",
        "description": "Returns a list of all roles along with their associated permissions.",
        "responses": {
          "200": {
            "description": "Roles retrieved successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RoleDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RoleDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RoleDto"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error."
          }
        }
      },
      "post": {
        "tags": [
          "Role"
        ],
        "summary": "Create a new role",
        "description": "Creates a role with a name, optional description, and an initial list of permissions.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoleRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoleRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Role created successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              }
            }
          },
          "409": {
            "description": "Role already exists.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error."
          }
        }
      }
    },
    "/api/v1/Role/{id}": {
      "delete": {
        "tags": [
          "Role"
        ],
        "summary": "Delete a role",
        "description": "Deletes a role only if it is not assigned to any users. Removes connections to associated permissions automatically.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Role deleted successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/Success"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Success"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/Success"
                }
              }
            }
          },
          "404": {
            "description": "Role not found.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "409": {
            "description": "Role is assigned to one or more users.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error."
          }
        }
      },
      "get": {
        "tags": [
          "Role"
        ],
        "summary": "Get role by ID",
        "description": "Returns a single role with all assigned permissions.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Role found.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              }
            }
          },
          "404": {
            "description": "Role not found."
          }
        }
      }
    },
    "/api/v1/Role/{id}/permissions": {
      "put": {
        "tags": [
          "Role"
        ],
        "summary": "Update role permissions",
        "description": "Replaces all permissions assigned to a role with a new list of permission keys.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRolePermissionsRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRolePermissionsRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRolePermissionsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Role permissions updated successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/RoleDto"
                }
              }
            }
          },
          "404": {
            "description": "Role not found.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error."
          }
        }
      }
    },
    "/api/v1/SalesOrder": {
      "post": {
        "tags": [
          "SalesOrder"
        ],
        "summary": "Create a new sales order",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSalesOrderRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSalesOrderRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSalesOrderRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sales order created.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/SalesOrder/{id}": {
      "get": {
        "tags": [
          "SalesOrder"
        ],
        "summary": "Get sales order by ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales order returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/SalesOrder/{id}/allocate": {
      "post": {
        "tags": [
          "SalesOrder"
        ],
        "summary": "Allocate a sales order",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales order allocated.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesOrderDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/SalesOrder/{id}/cancel": {
      "post": {
        "tags": [
          "SalesOrder"
        ],
        "summary": "Cancel a sales order",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales order cancelled."
          }
        }
      }
    },
    "/api/v1/SalesOrder/warehouse/{warehouseId}": {
      "get": {
        "tags": [
          "SalesOrder"
        ],
        "summary": "Get sales orders for a warehouse",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales orders returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SalesOrderDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SalesOrderDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SalesOrderDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Shipment": {
      "post": {
        "tags": [
          "Shipment"
        ],
        "summary": "Create shipment",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateShipmentRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateShipmentRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateShipmentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Shipment created.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ShipmentDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipmentDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipmentDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Shipment/{id}": {
      "get": {
        "tags": [
          "Shipment"
        ],
        "summary": "Get shipment",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Shipment returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ShipmentDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipmentDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShipmentDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/Shipment/warehouse/{warehouseId}": {
      "get": {
        "tags": [
          "Shipment"
        ],
        "summary": "Get shipments for warehouse",
        "parameters": [
          {
            "name": "warehouseId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Shipments returned.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ShipmentDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ShipmentDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ShipmentDto"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/UnitOfMeasure": {
      "get": {
        "tags": [
          "UnitOfMeasure"
        ],
        "summary": "Get all unit of measures",
        "description": "Returns all unit of measures in the system.",
        "responses": {
          "200": {
            "description": "List of unit of measures returned successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UnitOfMeasureDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UnitOfMeasureDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UnitOfMeasureDto"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No unit of measures found."
          }
        }
      }
    },
    "/api/v1/UnitOfMeasure/{id}": {
      "get": {
        "tags": [
          "UnitOfMeasure"
        ],
        "summary": "Get unit of measure by ID",
        "description": "Returns a unit of measure with the specified ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Unit of measure found.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/UnitOfMeasureDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnitOfMeasureDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnitOfMeasureDto"
                }
              }
            }
          },
          "404": {
            "description": "Unit of measure not found."
          }
        }
      }
    },
    "/api/v1/User": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Get all users",
        "description": "Returns all users along with their assigned roles their permissions and allowed warehouses.",
        "responses": {
          "200": {
            "description": "Users retrieved successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserDto"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error."
          }
        }
      }
    },
    "/api/v1/User/{id}": {
      "delete": {
        "tags": [
          "User"
        ],
        "summary": "Delete a user",
        "description": "Deletes the specified user and removes all related role, warehouse, and refresh-token associations.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/Success"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Success"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/Success"
                }
              }
            }
          },
          "404": {
            "description": "User not found."
          },
          "403": {
            "description": "You do not have permission to delete users."
          }
        }
      },
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Get user by ID",
        "description": "Returns the user with full role, permissions and warehouse data.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User found.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          },
          "404": {
            "description": "User not found."
          }
        }
      }
    },
    "/api/v1/User/{id}/active-status": {
      "put": {
        "tags": [
          "User"
        ],
        "summary": "Activate or deactivate a user",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserActiveStatusRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserActiveStatusRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserActiveStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User status updated.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          },
          "404": {
            "description": "User not found."
          }
        }
      }
    },
    "/api/v1/User/{id}/roles": {
      "put": {
        "tags": [
          "User"
        ],
        "summary": "Update user roles",
        "description": "Replaces the user's assigned roles with the specified list of role IDs.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRolesRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRolesRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRolesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User roles updated successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error."
          }
        }
      }
    },
    "/api/v1/User/{id}/warehouses": {
      "put": {
        "tags": [
          "User"
        ],
        "summary": "Update user warehouse access",
        "description": "Assigns the user access to the specified warehouse IDs.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserWarehousesRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserWarehousesRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserWarehousesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User warehouse access updated successfully.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error."
          }
        }
      }
    },
    "/api/v1/Warehouse": {
      "get": {
        "tags": [
          "Warehouse"
        ],
        "summary": "Get all warehouses",
        "description": "Returns all warehouses configured in the Magna WMS system.",
        "responses": {
          "200": {
            "description": "List of warehouses.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WarehouseDto"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WarehouseDto"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/WarehouseDto"
                  }
                }
              }
            }
          },
          "204": {
            "description": "No warehouses available."
          },
          "500": {
            "description": "Internal server error."
          }
        }
      }
    },
    "/api/v1/Warehouse/{id}": {
      "get": {
        "tags": [
          "Warehouse"
        ],
        "summary": "Get warehouse by ID",
        "description": "Returns a specific warehouse by its unique identifier.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Warehouse found.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseDto"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseDto"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/WarehouseDto"
                }
              }
            }
          },
          "404": {
            "description": "Warehouse not found."
          },
          "500": {
            "description": "Internal server error."
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CreatePutawayTaskRequest": {
        "type": "object",
        "properties": {
          "receiptId": {
            "type": "integer",
            "format": "int64"
          },
          "receiptLineId": {
            "type": "integer",
            "format": "int64"
          },
          "quantityToPutaway": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "CreateReceiptLineRequest": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "expectedQty": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "CreateReceiptRequest": {
        "type": "object",
        "properties": {
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "receiptNumber": {
            "type": "string",
            "nullable": true
          },
          "externalReference": {
            "type": "string",
            "nullable": true
          },
          "expectedArrivalDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreateReceiptLineRequest"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CreateRoleRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "permissionKeys": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CreateSalesOrderLineRequest": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "quantityOrdered": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "CreateSalesOrderRequest": {
        "type": "object",
        "properties": {
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "orderNumber": {
            "type": "string",
            "nullable": true
          },
          "customerName": {
            "type": "string",
            "nullable": true
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreateSalesOrderLineRequest"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CreateShipmentRequest": {
        "type": "object",
        "properties": {
          "salesOrderId": {
            "type": "integer",
            "format": "int64"
          },
          "shipmentNumber": {
            "type": "string",
            "nullable": true
          },
          "carrier": {
            "type": "string",
            "nullable": true
          },
          "trackingNumber": {
            "type": "string",
            "nullable": true
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ShipmentLineRequest"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ExecutePutawayRequest": {
        "type": "object",
        "properties": {
          "quantity": {
            "type": "number",
            "format": "double"
          },
          "destinationLocationId": {
            "type": "integer",
            "format": "int64"
          }
        },
        "additionalProperties": false
      },
      "ForecastPointDto": {
        "type": "object",
        "properties": {
          "forecastDateUtc": {
            "type": "string",
            "format": "date-time"
          },
          "quantity": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "ForecastSeriesDto": {
        "type": "object",
        "properties": {
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "generatedUtc": {
            "type": "string",
            "format": "date-time"
          },
          "horizonDays": {
            "type": "integer",
            "format": "int32"
          },
          "modelInfo": {
            "type": "string",
            "nullable": true
          },
          "points": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ForecastPointDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "InventoryDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "locationId": {
            "type": "integer",
            "format": "int64"
          },
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "quantityOnHand": {
            "type": "number",
            "format": "double"
          },
          "quantityAllocated": {
            "type": "number",
            "format": "double"
          },
          "quantityAvailable": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "InventoryLedgerEntryDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "locationId": {
            "type": "integer",
            "format": "int64"
          },
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "timestampUtc": {
            "type": "string",
            "format": "date-time"
          },
          "quantityChange": {
            "type": "number",
            "format": "double"
          },
          "resultingQuantityOnHand": {
            "type": "number",
            "format": "double"
          },
          "movementType": {
            "type": "string",
            "nullable": true
          },
          "referenceType": {
            "type": "string",
            "nullable": true
          },
          "referenceNumber": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ItemDto": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "sku": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "unitOfMeasureId": {
            "type": "integer",
            "format": "int64"
          },
          "isActive": {
            "type": "boolean"
          },
          "createdUtc": {
            "type": "string",
            "format": "date-time"
          },
          "updatedUtc": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "LocationDto": {
        "type": "object",
        "properties": {
          "locationId": {
            "type": "integer",
            "format": "int64"
          },
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "code": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string",
            "nullable": true
          },
          "maxQty": {
            "type": "integer",
            "format": "int32"
          },
          "isActive": {
            "type": "boolean"
          },
          "createdUtc": {
            "type": "string",
            "format": "date-time"
          },
          "updatedUtc": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "integer",
            "format": "int64"
          },
          "email": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "PermissionDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "key": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "PickItemRequest": {
        "type": "object",
        "properties": {
          "quantityPicked": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "PickTaskDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "salesOrderId": {
            "type": "integer",
            "format": "int64"
          },
          "status": {
            "type": "string",
            "nullable": true
          },
          "createdUtc": {
            "type": "string",
            "format": "date-time"
          },
          "updatedUtc": {
            "type": "string",
            "format": "date-time"
          },
          "createdByUserId": {
            "type": "integer",
            "format": "int64"
          },
          "completedByUserId": {
            "type": "integer",
            "format": "int64",
            "nullable": true
          },
          "completedUtc": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PickTaskLineDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "PickTaskLineDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "locationId": {
            "type": "integer",
            "format": "int64"
          },
          "quantityToPick": {
            "type": "number",
            "format": "double"
          },
          "quantityPicked": {
            "type": "number",
            "format": "double"
          },
          "isCompleted": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "detail": {
            "type": "string",
            "nullable": true
          },
          "instance": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": { }
      },
      "PutawayTaskDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "receiptId": {
            "type": "integer",
            "format": "int64"
          },
          "receiptLineId": {
            "type": "integer",
            "format": "int64"
          },
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "quantityToPutaway": {
            "type": "number",
            "format": "double"
          },
          "quantityCompleted": {
            "type": "number",
            "format": "double"
          },
          "status": {
            "type": "string",
            "nullable": true
          },
          "createdByUserId": {
            "type": "integer",
            "format": "int64"
          },
          "completedByUserId": {
            "type": "integer",
            "format": "int64",
            "nullable": true
          },
          "createdUtc": {
            "type": "string",
            "format": "date-time"
          },
          "completedUtc": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ReceiptDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "receiptNumber": {
            "type": "string",
            "nullable": true
          },
          "externalReference": {
            "type": "string",
            "nullable": true
          },
          "expectedArrivalDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "status": {
            "type": "string",
            "nullable": true
          },
          "createdUtc": {
            "type": "string",
            "format": "date-time"
          },
          "closedUtc": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdByUserId": {
            "type": "integer",
            "format": "int64"
          },
          "receivedByUserId": {
            "type": "integer",
            "format": "int64",
            "nullable": true
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ReceiptLineDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ReceiptLineDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "itemSku": {
            "type": "string",
            "nullable": true
          },
          "itemName": {
            "type": "string",
            "nullable": true
          },
          "unitOfMeasure": {
            "type": "string",
            "nullable": true
          },
          "expectedQty": {
            "type": "number",
            "format": "double"
          },
          "receivedQty": {
            "type": "number",
            "format": "double"
          },
          "toLocationId": {
            "type": "integer",
            "format": "int64",
            "nullable": true
          },
          "notes": {
            "type": "string",
            "nullable": true
          },
          "isFullyReceived": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "ReceiveReceiptLineRequest": {
        "type": "object",
        "properties": {
          "quantity": {
            "type": "number",
            "format": "double"
          },
          "toLocationId": {
            "type": "integer",
            "format": "int64"
          },
          "notes": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "RegisterCommand": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "RegisterResponse": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "integer",
            "format": "int64"
          },
          "email": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ReplenishmentSuggestionDto": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "quantityAvailable": {
            "type": "number",
            "format": "double"
          },
          "forecastQtyLeadTime": {
            "type": "number",
            "format": "double"
          },
          "safetyStock": {
            "type": "number",
            "format": "double"
          },
          "reorderPoint": {
            "type": "number",
            "format": "double"
          },
          "suggestedOrderQty": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "RoleDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "permissions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "SalesOrderDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "orderNumber": {
            "type": "string",
            "nullable": true
          },
          "customerName": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "nullable": true
          },
          "createdUtc": {
            "type": "string",
            "format": "date-time"
          },
          "updatedUtc": {
            "type": "string",
            "format": "date-time"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SalesOrderLineDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "SalesOrderLineDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "quantityOrdered": {
            "type": "number",
            "format": "double"
          },
          "quantityAllocated": {
            "type": "number",
            "format": "double"
          },
          "quantityPicked": {
            "type": "number",
            "format": "double"
          },
          "isFullyAllocated": {
            "type": "boolean"
          },
          "isFullyPicked": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "ShipmentDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "salesOrderId": {
            "type": "integer",
            "format": "int64"
          },
          "shipmentNumber": {
            "type": "string",
            "nullable": true
          },
          "carrier": {
            "type": "string",
            "nullable": true
          },
          "trackingNumber": {
            "type": "string",
            "nullable": true
          },
          "shippedByUserId": {
            "type": "integer",
            "format": "int64"
          },
          "shippedUtc": {
            "type": "string",
            "format": "date-time"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ShipmentLineDto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ShipmentLineDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "quantityShipped": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "ShipmentLineRequest": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "integer",
            "format": "int64"
          },
          "quantity": {
            "type": "number",
            "format": "double"
          }
        },
        "additionalProperties": false
      },
      "Success": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "TrainForecastResultDto": {
        "type": "object",
        "properties": {
          "warehouseId": {
            "type": "integer",
            "format": "int64"
          },
          "itemsConsidered": {
            "type": "integer",
            "format": "int32"
          },
          "itemsForecasted": {
            "type": "integer",
            "format": "int32"
          },
          "itemsSkippedInsufficientHistory": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "UnitOfMeasureDto": {
        "type": "object",
        "properties": {
          "unitOfMeasureId": {
            "type": "integer",
            "format": "int64"
          },
          "symbol": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "createdUtc": {
            "type": "string",
            "format": "date-time"
          },
          "updatedUtc": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "UpdateRolePermissionsRequest": {
        "type": "object",
        "properties": {
          "permissionKeys": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UpdateUserActiveStatusRequest": {
        "type": "object",
        "properties": {
          "isActive": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "UpdateUserRolesRequest": {
        "type": "object",
        "properties": {
          "roleIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UpdateUserWarehousesRequest": {
        "type": "object",
        "properties": {
          "warehouseIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "isActive": {
            "type": "boolean"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          },
          "warehouseIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            },
            "nullable": true
          },
          "permissions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "WarehouseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "code": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "timeZone": {
            "type": "string",
            "nullable": true
          },
          "isActive": {
            "type": "boolean"
          },
          "createdUtc": {
            "type": "string",
            "format": "date-time"
          },
          "updatedUtc": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      }
    }
  }
}